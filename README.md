# README.md
API проекта Yatube (backend)

Как запустить проект:

- Клонировать репозиторий и перейти в него в командной строке:
```sh
git clone git@github.com:morongod/api_final_yatube.git
```
```sh
cd yatube_api
```

- Cоздать и активировать виртуальное окружение:
```sh
python -m venv venv
```
```sh
source venv/Scripts/activate
```

- Установить зависимости из файла requirements.txt:
```sh
python -m pip install --upgrade pip
```
```sh
pip install -r requirements.txt
```

- Выполнить миграции:
```sh
python manage.py migrate
```

- Запустить проект:
```sh
python manage.py runserver
```

# Примеры. Некоторые примеры запросов к API.
### Получить список всех публикаций.
### Endpoint - _/posts/_
Метод GET:
```sh
http://127.0.0.1:8000/api/v1/posts/
```
Response:
```sh
[
    {
        "id": 1,
        "author": "admin",
        "text": "Новость о какй-то фигне",
        "pub_date": "2023-02-28T07:04:48.984005Z",
        "image": null,
        "group": 1
    },
    {
        "id": 2,
        "author": "user",
        "text": "Новость о какй-то музыке",
        "pub_date": "2023-02-28T07:17:23.292693Z",
        "image": null,
        "group": 2
    }
]
```
Responses:
200 - Удачное выполнение запроса

### Получить список всех публикаций с параметрами limit и offset
- limit (Количество публикаций на страницу)
- offset (Номер страницы после которой начинать выдачу)
### Endpoint - _/posts/_
Метод GET:
```sh
http://127.0.0.1:8000/api/v1/posts/?offset=2&limit=3
```
Response:
```sh
{
    "count": 7,
    "next": "http://127.0.0.1:8000/api/v1/posts/?limit=3&offset=5",
    "previous": "http://127.0.0.1:8000/api/v1/posts/?limit=3",
    "results": [
        {
            "id": 3,
            "author": "user",
            "text": "Текст",
            "pub_date": "2023-03-02T08:33:53.259744Z",
            "image": null,
            "group": 1
        },
        {
            "id": 4,
            "author": "user",
            "text": "Текст снова",
            "pub_date": "2023-03-02T08:34:01.225527Z",
            "image": null,
            "group": 1
        },
        {
            "id": 5,
            "author": "user",
            "text": "Текст снова и вновь",
            "pub_date": "2023-03-02T08:34:06.313201Z",
            "image": null,
            "group": 1
        }
    ]
}
```
Responses:
200 - Удачное выполнение запроса

### Добавление новой публикации в коллекцию публикаций. Анонимные запросы запрещены.
- text (текст публикации)
- image (картинка, необязательна)
- group (id сообщества)
### Endpoint - _/posts/_
Метод POST:
```sh
http://127.0.0.1:8000/api/v1/posts/
```
```sh
{
    "text": "Вот это текст",
    "group": 2
}
```
Response:
```sh
{
    "id": 8,
    "author": "user",
    "text": "Вот это текст",
    "pub_date": "2023-03-02T08:40:52.302917Z",
    "image": null,
    "group": 2
}
```
Responses:
201 - Удачное выполнение запроса
400 - Отсутствует обязательное поле в теле запроса
401 - Запрос от имени анонимного пользователя

### Получение публикации по id.
- id (id публикации)
### Endpoint - _/posts/{id}/_
Метод GET:
```sh
http://127.0.0.1:8000/api/v1/posts/3/
```

Response:
```sh
{
    "id": 3,
    "author": "user",
    "text": "Текст",
    "pub_date": "2023-03-02T08:33:53.259744Z",
    "image": null,
    "group": 1
}
```
Responses:
200 - Удачное выполнение запроса
404 - Попытка запроса несуществующей публикации

### Обновление публикации по id. Обновить публикацию может только автор публикации. Анонимные запросы запрещены
- id (id публикации, передается в URL)
- text (текст публикации)
- image (картинка, необязательна)
- group (id сообщества)
### Endpoint - _/posts/{id}/_
Метод PUT:
```sh
http://127.0.0.1:8000/api/v1/posts/3/
```
```sh
{
    "text": "Вот это текст изменили",
    "group": 1
}
```
Response:
```sh
{
    "id": 3,
    "author": "user",
    "text": "Вот это текст изменили",
    "pub_date": "2023-03-02T08:33:53.259744Z",
    "image": null,
    "group": 1
}
```
Responses:
200 - Удачное выполнение запроса
400 - Отсутствует обязательное поле в теле запроса
401 - Запрос от имени анонимного пользователя
403 - Попытка изменения чужого контента
404 - Попытка запроса несуществующей публикации

### Частичное обновление публикации по id. Обновить публикацию может только автор публикации. Анонимные запросы запрещены.
- id (id публикации, передается в URL)
- text (текст публикации)
- image (картинка, необязательна)
- group (id сообщества)
### Endpoint - _/posts/{id}/_
Метод PATCH:
```sh
http://127.0.0.1:8000/api/v1/posts/3/
```
```sh
{
    "group": 2
}
```
Response:
```sh
{
    "id": 3,
    "author": "user",
    "text": "Вот это текст изменили",
    "pub_date": "2023-03-02T08:33:53.259744Z",
    "image": null,
    "group": 2
}
```
Responses:
200 - Удачное выполнение запроса
401 - Запрос от имени анонимного пользователя
403 - Попытка изменения чужого контента
404 - Попытка запроса несуществующей публикации

### Удаление публикации по id. Удалить публикацию может только автор публикации. Анонимные запросы запрещены.
- id (id публикации, передается в URL)
### Endpoint - _/posts/{id}/_
Метод DELETE:
```sh
http://127.0.0.1:8000/api/v1/posts/3/
```
Response:
```sh

```
Responses:
204 - Удачное выполнение запроса
401 - Запрос от имени анонимного пользователя
403 - Попытка изменения чужого контента
404 - Попытка удаления несуществующей публикации
